---
layout: post
title: "超算集群和常规分布式集群的区别"
modified:
categories: tech
excerpt:
tags: []
image:
  feature:
---

现在国家在超算行业投入了大量的资金建设超算中心（天津，广州，无锡，上海，济南，成都），BAT等互联网行业巨头也逐步开始搭建自己的机房和集群。好奇的你也许会问，这两者在结构和功能上有本质的区别吗？还是仅仅是规模上的区别？本文简要总结了两者在架构上和功能上的主要区别。

## 底层架构不同
超算系统往往使用Infiniband或者基于IB的订制网络，以便提高各个节点之间网络通信IO带宽。常规分布式集群一般使用千兆网卡或者万兆网卡。超算常用于计算密集型的科学应用，这类应用的特点是计算模型大，迭代次数多。因此需要将一个大的模型（网格）划分为成千上万个子任务到不同的节点，这些任务是紧耦合的，这部分求解的结果在下一步需要用到，因此节点之间需要低延迟的数据交换。因此才使用IB网络，甚至针对MPI做深度的订制和优化。而常规分布式集群的作业往往是松耦合，工作中通信和同步并不是主要的瓶颈，如将一亿张图片分配到不同节点压缩，这些任务之间是相对独立的。

超算系统一般会配置高档的磁盘阵列，各计算节点不配置独立的磁盘。常规分布式集群每个节点都会挂在磁盘。据我所知，超算应用中以IO为瓶颈的应用不多，更多的则是内存带宽、网络延迟、网络带宽成为瓶颈。而商用分布式集群处理的问题（如mapreduce），则对磁盘IO的要求非常高。这时，商用集群可以用廉价的单节点磁盘来达到高磁盘IO。

超算系统由于发热强劲，常使用水冷或者液冷技术。

## 擅长的领域不同
两者相比，搭建常规分布式集群的成本和维护成本远小于超算系统。超算更适合计算密集型的作业，如分子动力学，流体力学，天气预报报，蛋白质折叠等等。而分布式集群的Mapreduce则更适合IO密集型作业。由于成本较低，常规分布式集群可能将集群规模建的很大，因此最适合扫描过滤海量的数据，例如互联网行业的经典应用：为搜索引擎创建全网Web网页的索引。

总而言之，常规的分布式集群属于分布式计算系统（distributed computing system），在分布式计算系统中每个节点相对独立，相互之间没有高速的网络互连，负责计算一个相对独立的任务，计算完成之后将结果汇总。而超算系统属于并行计算系统（parallel computing system），与常规的分布式系统不同，不同的节点之间需要使用高速网络互连，且需要频繁的通信，而且通信数据量可以很大。

例如，矩阵的加法可以分解成多个模块，每个节点只需要计算出对应的部分即可。矩阵的乘法则需要分解之后各个节点之间进行频繁的通信。

## 总结
功能和用途决定了超算集群和常规分布式集群的基本组成。适合紧耦合高性能计算的超算系统需要高速的网络互连，常常需要高速的IB网络甚至深度定制的MPI；而适合松耦合的分布式集群则对网络互连要求很低，但是对IO要求很高。

## 引用
[有了分布式计算平台后，像天河这种超级计算机还有存在的必要吗？](https://www.zhihu.com/question/21294792)